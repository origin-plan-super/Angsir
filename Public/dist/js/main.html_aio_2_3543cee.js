/*!dep/jquery.imgcutter/dist/jquery.imgcutter.js*/
;!function(h,c){"function"==typeof define&&define.amd?define("dep/jquery.imgcutter/dist/jquery.imgcutter",["jquery"],c):"object"==typeof exports?module.exports=c(require("jquery")):c(h.$)}(this,function(h){"use strict";function c(c,g,v){c=h.extend(!0,{},a,c),this.previewrWidth=parseInt(c.previewrWidth),this.previewrHeight=parseInt(c.previewrHeight),this.selectorWidth=parseInt(c.selectorWidth),this.selectorHeight=parseInt(c.selectorHeight),this.sliderLength=parseInt(c.sliderLength),this.enlargeMax=c.enlargeMax,this.clickEnlarge=c.clickEnlarge,this.enlargeRate=c.enlargeRate,this.beforePreview=c.beforePreview,this.$input=v,this.$container=g,this.$previewr=null,this.$inner=null,this.$outer=null,this.$slider=null,this.$sliderHandle=null,this.clear()}h.fn.imgcutter=function(a){if(h(this).is("input[type=file]")){var g=h(this).data("imgcutter");if("string"!=typeof a){if(g)return this;var v;if(a.container&&(v=a.container instanceof jQuery?a.container:h(a.container),v.length)){var g=new c(a,v,h(this));return h(this).data("imgcutter",g),g.init(),this}}else if(g&&g[a])return g[a].apply(g,Array.prototype.slice.call(arguments,1))}};var a={container:"",previewrWidth:300,previewrHeight:300,selectorWidth:250,selectorHeight:250,sliderLength:200,enlargeMax:2,clickEnlarge:!0,enlargeRate:"all",beforePreview:null};h.extend(c.prototype,{init:function(){this.$container.html(['<div class="imgcutter-previewr">','<div class="imgcutter-selector imgcutter-shadow"></div>','<div class="imgcutter-selector imgcutter-inner"></div>','<div class="imgcutter-selector imgcutter-outer"></div>',"</div>",'<div class="imgcutter-slider">','<span class="imgcutter-slider-reduce"></span>','<span class="imgcutter-slider-handler"></span>','<span class="imgcutter-slider-enlarge"></span>',"</div>"].join("")),this.$previewr=this.$container.children(".imgcutter-previewr").css({width:this.previewrWidth,height:this.previewrHeight}),this.$previewr.children(".imgcutter-selector").css({width:this.selectorWidth,height:this.selectorHeight,"margin-left":-this.selectorWidth/2,"margin-top":-this.selectorHeight/2}),this.$inner=this.$previewr.children(".imgcutter-inner"),this.$outer=this.$previewr.children(".imgcutter-outer"),this.$slider=this.$container.children(".imgcutter-slider").css({width:this.sliderLength,"margin-left":(this.previewrWidth-this.sliderLength)/2}),this.clickEnlarge&&this.$slider.css("cursor","pointer"),this.$sliderHandle=this.$slider.children(".imgcutter-slider-handler"),this.initEvent()},initEvent:function(){var c=this;this.$input.on("change.imgcutter",function(e){c.preview(e)}),this.$container.on("selectstart.imgcutter",function(e){e.preventDefault()}),this.$previewr.on("mousedown.imgcutter",function(e){e.preventDefault();var a=e.clientY-parseFloat(c.$photo.css("top")),g=e.clientX-parseFloat(c.$photo.css("left")),v=c.$photo.width(),$=c.$photo.height(),w=function(e){var h=c.block(c.selectorWidth-v,e.clientX-g,0),w=c.block(c.selectorHeight-$,e.clientY-a,0);c.$photo.css({top:w,left:h})};h(document).on("mousemove",w).one("mouseup",function(){h(this).off("mousemove",w)})}),this.$sliderHandle.on("mousedown.imgcutter",function(e){if(e.preventDefault(),c.beginWidth){var a=h(this),g=e.clientX-parseFloat(a.css("left")),v=function(e){var h=parseFloat(a.css("left")),v=c.block(0,e.clientX-g,c.sliderLength);a.css("left",v),h!==v&&c.change(v/c.sliderLength,h>v)};h(document).on("mousemove",v).one("mouseup",function(){h(this).off("mousemove",v)})}}),this.clickEnlarge&&this.$slider.on("mousedown.imgcutter",function(e){if(c.beginWidth&&e.target!==c.$sliderHandle[0]){var a;if(!(e.clientX<h(this).offset().left||e.clientX>h(this).offset().left+c.sliderLength)){var g=e.clientX<c.$sliderHandle.offset().left;if("all"===c.enlargeRate)a=(e.clientX-h(this).offset().left)/c.sliderLength;else{var v=parseFloat(c.$sliderHandle.css("left"))/c.sliderLength;a=g?Math.max(0,v-c.enlargeRate):Math.min(v+c.enlargeRate,1)}c.$sliderHandle.css("left",c.sliderLength*a),c.change(a,g)}}})},preview:function(e){var c=this.$input[0],a=this,g=this.$input.val();if(""!==g&&(!document.selection||(c.select(),c.blur(),""!==document.selection.createRange().text))){if(this.beforePreview){var v=g.substr(g.lastIndexOf(".")+1);if(!this.beforePreview.call(c,e,v))return this.$inner&&this.$inner.empty(),this.$outer&&this.$outer.empty(),void this.clear()}if(c.files&&c.files[0]){if(!this.$photos){var $='<img class="imgcutter-photo" />';this.$inner.html($),this.$outer.html($),this.$photo=this.$previewr.find(".imgcutter-photo")}var w=new FileReader;w.onload=function(e){a.$photo.prop("src",e.target.result)},w.readAsDataURL(c.files[0]),this.$photo.on("load",function(){a.originalWidth=this.naturalWidth,a.originalHeight=this.naturalHeight,a.autoSize(),h(this).css({width:a.beginWidth,height:a.beginHeight,top:-(a.beginHeight-a.selectorHeight)/2,left:-(a.beginWidth-a.selectorWidth)/2})})}else{if(!this.$photos){var $='<div class="imgcutter-photo"></div>';this.$inner.html($),this.$outer.html($),this.$photo=this.$previewr.find(".imgcutter-photo"),h('<img class="imgcutter-photo-fake" />').appendTo(h("body")).css({position:"absolute",top:-9999,left:0,filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=image)"})}c.select(),c.blur();var H=document.selection.createRange().text,W=h(".imgcutter-photo-fake").hide().show(),b=W[0];b.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src=H,this.originalWidth=b.offsetWidth,this.originalHeight=b.offsetHeight,this.autoSize(),W.hide(),this.$photo.css({width:this.beginWidth,height:this.beginHeight,top:-(this.beginHeight-this.selectorHeight)/2,left:-(this.beginWidth-this.selectorWidth)/2,filter:'progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale,src="'+H+'"'})}this.$sliderHandle.css("left",0)}},autoSize:function(){this.originalWidth/this.originalHeight>=this.selectorWidth/this.selectorHeight?(this.beginWidth=this.selectorHeight*this.originalWidth/this.originalHeight,this.beginHeight=this.selectorHeight):(this.beginHeight=this.selectorWidth*this.originalHeight/this.originalWidth,this.beginWidth=this.selectorWidth)},block:function(h,c,a){return c>a?a:h>c?h:c},change:function(h,c){var a=this.$photo.width(),g=this.$photo.height(),v=parseFloat(this.$photo.css("left")),$=parseFloat(this.$photo.css("top")),w=this.beginWidth*(h*(this.enlargeMax-1)+1),H=this.beginHeight*(h*(this.enlargeMax-1)+1),W=-((-v+this.selectorWidth/2)*w/a-this.selectorWidth/2);W=c?this.block(this.selectorWidth-w,W,0):W;var b=-((-$+this.selectorHeight/2)*H/g-this.selectorHeight/2);b=c?this.block(this.selectorHeight-H,b,0):b,this.$photo.css({width:w,height:H,left:W,top:b})},clear:function(){this.$photo=null,this.originalWidth=0,this.originalHeight=0,this.beginWidth=0,this.beginHeight=0},getCutInfo:function(){return{previewrWidth:this.previewrWidth,previewrHeight:this.previewrHeight,selectorWidth:this.selectorWidth,selectorHeight:this.selectorHeight,originalWidth:this.originalWidth,originalHeight:this.originalHeight,currentWidth:this.$photo?this.$photo.width():0,currentHeight:this.$photo?this.$photo.height():0,selectorX:this.$photo?Math.abs(parseFloat(this.$photo.css("left"))):0,selectorY:this.$photo?Math.abs(parseFloat(this.$photo.css("top"))):0}},cut:function(c,a,g){var v=this.getCutInfo();if(0!==v.currentWidth){a=parseFloat(a),g=parseFloat(g);var $=Math.max(a/v.selectorWidth,g/v.selectorHeight),w=v.currentWidth*$,H=v.currentHeight*$,W=v.selectorX*$,b=v.selectorY*$,y=c instanceof jQuery?c:h(c),I=y.css("position");-1===h.inArray(I,["absolute","fixed","relative"])&&y.css("position","relative"),y.css({width:a,height:g,overflow:"hidden"});var M=this.$photo.is("img"),L=y.children(".imgcutter-cut-preview");if(0===L.length&&(L=h(M?'<img class="imgcutter-cut-preview" />':'<div class="imgcutter-cut-preview"></div>')),M)L[0].src=this.$photo[0].src;else{var k=this.$photo[0].filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src;L.css("filter",'progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale,src="'+k+'"')}L.appendTo(y).css({position:"absolute",top:-b,left:-W,width:w,height:H})}},destory:function(){this.$input.off("change.imgcutter"),this.$container.off("selectstart.imgcutter"),this.$previewr.off("mousedown.imgcutter"),this.$sliderHandle.off("mousedown.imgcutter"),this.clickEnlarge&&this.$slider.off("mousedown.imgcutter"),this.$input.removeData("imgcutter"),this.$container.empty(),h(".imgcutter-photo-fake").remove()}})});
/*!dep/jquery-form/jquery.form.js*/
;!function(a){"function"==typeof define&&define.amd?define("dep/jquery-form/jquery.form",["jquery"],a):a("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(a){"use strict";function c(e){var c=e.data;e.isDefaultPrevented()||(e.preventDefault(),a(e.target).ajaxSubmit(c))}function h(e){var c=e.target,h=a(c);if(!h.is("[type=submit],[type=image]")){var t=h.closest("[type=submit]");if(0===t.length)return;c=t[0]}var v=this;if(v.clk=c,"image"==c.type)if(void 0!==e.offsetX)v.clk_x=e.offsetX,v.clk_y=e.offsetY;else if("function"==typeof a.fn.offset){var g=h.offset();v.clk_x=e.pageX-g.left,v.clk_y=e.pageY-g.top}else v.clk_x=e.pageX-c.offsetLeft,v.clk_y=e.pageY-c.offsetTop;setTimeout(function(){v.clk=v.clk_x=v.clk_y=null},100)}function v(){if(a.fn.ajaxSubmit.debug){var c="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(c):window.opera&&window.opera.postError&&window.opera.postError(c)}}var g={};g.fileapi=void 0!==a("<input type='file'/>").get(0).files,g.formdata=void 0!==window.FormData;var y=!!a.fn.prop;a.fn.attr2=function(){if(!y)return this.attr.apply(this,arguments);var a=this.prop.apply(this,arguments);return a&&a.jquery||"string"==typeof a?a:this.attr.apply(this,arguments)},a.fn.ajaxSubmit=function(c){function h(h){var i,v,g=a.param(h,c.traditional).split("&"),y=g.length,b=[];for(i=0;y>i;i++)g[i]=g[i].replace(/\+/g," "),v=g[i].split("="),b.push([decodeURIComponent(v[0]),decodeURIComponent(v[1])]);return b}function b(v){for(var g=new FormData,i=0;i<v.length;i++)g.append(v[i].name,v[i].value);if(c.extraData){var y=h(c.extraData);for(i=0;i<y.length;i++)y[i]&&g.append(y[i][0],y[i][1])}c.data=null;var s=a.extend(!0,{},a.ajaxSettings,c,{contentType:!1,processData:!1,cache:!1,type:j||"POST"});c.uploadProgress&&(s.xhr=function(){var h=a.ajaxSettings.xhr();return h.upload&&h.upload.addEventListener("progress",function(a){var h=0,v=a.loaded||a.position,g=a.total;a.lengthComputable&&(h=Math.ceil(v/g*100)),c.uploadProgress(a,v,g,h)},!1),h}),s.data=null;var b=s.beforeSend;return s.beforeSend=function(a,o){o.data=c.formData?c.formData:g,b&&b.call(this,a,o)},a.ajax(s)}function T(h){function g(a){var c=null;try{a.contentWindow&&(c=a.contentWindow.document)}catch(h){v("cannot get iframe.contentWindow document: "+h)}if(c)return c;try{c=a.contentDocument?a.contentDocument:a.document}catch(h){v("cannot get iframe.contentDocument: "+h),c=a.document}return c}function b(){function c(){try{var a=g(L).readyState;v("state = "+a),a&&"uninitialized"==a.toLowerCase()&&setTimeout(c,50)}catch(e){v("Server abort: ",e," (",e.name,")"),T(P),X&&clearTimeout(X),X=void 0}}var t=D.attr2("target"),h=D.attr2("action");C.setAttribute("target",k),(!j||/post/i.test(j))&&C.setAttribute("method","POST"),h!=s.url&&C.setAttribute("action",s.url),s.skipEncodingOverride||j&&!/post/i.test(j)||D.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),s.timeout&&(X=setTimeout(function(){O=!0,T(N)},s.timeout));var y=[];try{if(s.extraData)for(var n in s.extraData)s.extraData.hasOwnProperty(n)&&y.push(a.isPlainObject(s.extraData[n])&&s.extraData[n].hasOwnProperty("name")&&s.extraData[n].hasOwnProperty("value")?a('<input type="hidden" name="'+s.extraData[n].name+'">').val(s.extraData[n].value).appendTo(C)[0]:a('<input type="hidden" name="'+n+'">').val(s.extraData[n]).appendTo(C)[0]);s.iframeTarget||A.appendTo("body"),L.attachEvent?L.attachEvent("onload",T):L.addEventListener("load",T,!1),setTimeout(c,15);try{C.submit()}catch(b){var w=document.createElement("form").submit;w.apply(C)}}finally{C.setAttribute("action",h),t?C.setAttribute("target",t):D.removeAttr("target"),a(y).remove()}}function T(e){if(!M.aborted&&!W){if(H=g(L),H||(v("cannot access response document"),e=P),e===N&&M)return M.abort("timeout"),void _.reject(M,"timeout");if(e==P&&M)return M.abort("server abort"),void _.reject(M,"error","server abort");if(H&&H.location.href!=s.iframeSrc||O){L.detachEvent?L.detachEvent("onload",T):L.removeEventListener("load",T,!1);var c,h="success";try{if(O)throw"timeout";var y="xml"==s.dataType||H.XMLDocument||a.isXMLDoc(H);if(v("isXml="+y),!y&&window.opera&&(null===H.body||!H.body.innerHTML)&&--U)return v("requeing onLoad callback, DOM not available"),void setTimeout(T,250);var b=H.body?H.body:H.documentElement;M.responseText=b?b.innerHTML:null,M.responseXML=H.XMLDocument?H.XMLDocument:H,y&&(s.dataType="xml"),M.getResponseHeader=function(a){var c={"content-type":s.dataType};return c[a.toLowerCase()]},b&&(M.status=Number(b.getAttribute("status"))||M.status,M.statusText=b.getAttribute("statusText")||M.statusText);var j=(s.dataType||"").toLowerCase(),w=/(json|script|text)/.test(j);if(w||s.textarea){var D=H.getElementsByTagName("textarea")[0];if(D)M.responseText=D.value,M.status=Number(D.getAttribute("status"))||M.status,M.statusText=D.getAttribute("statusText")||M.statusText;else if(w){var k=H.getElementsByTagName("pre")[0],E=H.getElementsByTagName("body")[0];k?M.responseText=k.textContent?k.textContent:k.innerText:E&&(M.responseText=E.textContent?E.textContent:E.innerText)}}else"xml"==j&&!M.responseXML&&M.responseText&&(M.responseXML=V(M.responseText));try{R=Y(M,j,s)}catch(F){h="parsererror",M.error=c=F||h}}catch(F){v("error caught: ",F),h="error",M.error=c=F||h}M.aborted&&(v("upload aborted"),h=null),M.status&&(h=M.status>=200&&M.status<300||304===M.status?"success":"error"),"success"===h?(s.success&&s.success.call(s.context,R,"success",M),_.resolve(M.responseText,"success",M),S&&a.event.trigger("ajaxSuccess",[M,s])):h&&(void 0===c&&(c=M.statusText),s.error&&s.error.call(s.context,M,h,c),_.reject(M,"error",c),S&&a.event.trigger("ajaxError",[M,s,c])),S&&a.event.trigger("ajaxComplete",[M,s]),S&&!--a.active&&a.event.trigger("ajaxStop"),s.complete&&s.complete.call(s.context,M,h),W=!0,s.timeout&&clearTimeout(X),setTimeout(function(){s.iframeTarget?A.attr("src",s.iframeSrc):A.remove(),M.responseXML=null},100)}}}var w,i,s,S,k,A,L,M,F,n,O,X,C=D[0],_=a.Deferred();if(_.abort=function(a){M.abort(a)},h)for(i=0;i<E.length;i++)w=a(E[i]),y?w.prop("disabled",!1):w.removeAttr("disabled");if(s=a.extend(!0,{},a.ajaxSettings,c),s.context=s.context||s,k="jqFormIO"+(new Date).getTime(),s.iframeTarget?(A=a(s.iframeTarget),n=A.attr2("name"),n?k=n:A.attr2("name",k)):(A=a('<iframe name="'+k+'" src="'+s.iframeSrc+'" />'),A.css({position:"absolute",top:"-1000px",left:"-1000px"})),L=A[0],M={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(c){var e="timeout"===c?"timeout":"aborted";v("aborting upload... "+e),this.aborted=1;try{L.contentWindow.document.execCommand&&L.contentWindow.document.execCommand("Stop")}catch(h){}A.attr("src",s.iframeSrc),M.error=e,s.error&&s.error.call(s.context,M,e,c),S&&a.event.trigger("ajaxError",[M,s,e]),s.complete&&s.complete.call(s.context,M,e)}},S=s.global,S&&0===a.active++&&a.event.trigger("ajaxStart"),S&&a.event.trigger("ajaxSend",[M,s]),s.beforeSend&&s.beforeSend.call(s.context,M,s)===!1)return s.global&&a.active--,_.reject(),_;if(M.aborted)return _.reject(),_;F=C.clk,F&&(n=F.name,n&&!F.disabled&&(s.extraData=s.extraData||{},s.extraData[n]=F.value,"image"==F.type&&(s.extraData[n+".x"]=C.clk_x,s.extraData[n+".y"]=C.clk_y)));var N=1,P=2,z=a("meta[name=csrf-token]").attr("content"),I=a("meta[name=csrf-param]").attr("content");I&&z&&(s.extraData=s.extraData||{},s.extraData[I]=z),s.forceSync?b():setTimeout(b,10);var R,H,W,U=50,V=a.parseXML||function(s,a){return window.ActiveXObject?(a=new ActiveXObject("Microsoft.XMLDOM"),a.async="false",a.loadXML(s)):a=(new DOMParser).parseFromString(s,"text/xml"),a&&a.documentElement&&"parsererror"!=a.documentElement.nodeName?a:null},B=a.parseJSON||function(s){return window.eval("("+s+")")},Y=function(c,h,s){var v=c.getResponseHeader("content-type")||"",g="xml"===h||!h&&v.indexOf("xml")>=0,y=g?c.responseXML:c.responseText;return g&&"parsererror"===y.documentElement.nodeName&&a.error&&a.error("parsererror"),s&&s.dataFilter&&(y=s.dataFilter(y,h)),"string"==typeof y&&("json"===h||!h&&v.indexOf("json")>=0?y=B(y):("script"===h||!h&&v.indexOf("javascript")>=0)&&a.globalEval(y)),y};return _}if(!this.length)return v("ajaxSubmit: skipping submit process - no element selected"),this;var j,w,S,D=this;"function"==typeof c?c={success:c}:void 0===c&&(c={}),j=c.type||this.attr2("method"),w=c.url||this.attr2("action"),S="string"==typeof w?a.trim(w):"",S=S||window.location.href||"",S&&(S=(S.match(/^([^#]+)/)||[])[1]),c=a.extend(!0,{url:S,success:a.ajaxSettings.success,type:j||a.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},c);var k={};if(this.trigger("form-pre-serialize",[this,c,k]),k.veto)return v("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(c.beforeSerialize&&c.beforeSerialize(this,c)===!1)return v("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var A=c.traditional;void 0===A&&(A=a.ajaxSettings.traditional);var L,E=[],M=this.formToArray(c.semantic,E);if(c.data&&(c.extraData=c.data,L=a.param(c.data,A)),c.beforeSubmit&&c.beforeSubmit(M,this,c)===!1)return v("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[M,this,c,k]),k.veto)return v("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var q=a.param(M,A);L&&(q=q?q+"&"+L:L),"GET"==c.type.toUpperCase()?(c.url+=(c.url.indexOf("?")>=0?"&":"?")+q,c.data=null):c.data=q;var F=[];if(c.resetForm&&F.push(function(){D.resetForm()}),c.clearForm&&F.push(function(){D.clearForm(c.includeHidden)}),!c.dataType&&c.target){var O=c.success||function(){};F.push(function(h){var v=c.replaceTarget?"replaceWith":"html";a(c.target)[v](h).each(O,arguments)})}else c.success&&F.push(c.success);if(c.success=function(a,h,v){for(var g=c.context||this,i=0,y=F.length;y>i;i++)F[i].apply(g,[a,h,v||D,D])},c.error){var X=c.error;c.error=function(a,h,v){var g=c.context||this;X.apply(g,[a,h,v,D])}}if(c.complete){var C=c.complete;c.complete=function(a,h){var v=c.context||this;C.apply(v,[a,h,D])}}var _=a("input[type=file]:enabled",this).filter(function(){return""!==a(this).val()}),N=_.length>0,P="multipart/form-data",z=D.attr("enctype")==P||D.attr("encoding")==P,I=g.fileapi&&g.formdata;v("fileAPI :"+I);var R,H=(N||z)&&!I;c.iframe!==!1&&(c.iframe||H)?c.closeKeepAlive?a.get(c.closeKeepAlive,function(){R=T(M)}):R=T(M):R=(N||z)&&I?b(M):a.ajax(c),D.removeData("jqxhr").data("jqxhr",R);for(var W=0;W<E.length;W++)E[W]=null;return this.trigger("form-submit-notify",[this,c]),this},a.fn.ajaxForm=function(g){if(g=g||{},g.delegation=g.delegation&&a.isFunction(a.fn.on),!g.delegation&&0===this.length){var o={s:this.selector,c:this.context};return!a.isReady&&o.s?(v("DOM not ready, queuing ajaxForm"),a(function(){a(o.s,o.c).ajaxForm(g)}),this):(v("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)")),this)}return g.delegation?(a(document).off("submit.form-plugin",this.selector,c).off("click.form-plugin",this.selector,h).on("submit.form-plugin",this.selector,g,c).on("click.form-plugin",this.selector,g,h),this):this.ajaxFormUnbind().bind("submit.form-plugin",g,c).bind("click.form-plugin",g,h)},a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},a.fn.formToArray=function(c,h){var v=[];if(0===this.length)return v;var y=this[0],b=c?y.getElementsByTagName("*"):y.elements;if(!b)return v;var i,T,n,j,w,S,D;for(i=0,S=b.length;S>i;i++)if(w=b[i],n=w.name,n&&!w.disabled)if(c&&y.clk&&"image"==w.type)y.clk==w&&(v.push({name:n,value:a(w).val(),type:w.type}),v.push({name:n+".x",value:y.clk_x},{name:n+".y",value:y.clk_y}));else if(j=a.fieldValue(w,!0),j&&j.constructor==Array)for(h&&h.push(w),T=0,D=j.length;D>T;T++)v.push({name:n,value:j[T]});else if(g.fileapi&&"file"==w.type){h&&h.push(w);var k=w.files;if(k.length)for(T=0;T<k.length;T++)v.push({name:n,value:k[T],type:w.type});else v.push({name:n,value:"",type:w.type})}else null!==j&&"undefined"!=typeof j&&(h&&h.push(w),v.push({name:n,value:j,type:w.type,required:w.required}));if(!c&&y.clk){var A=a(y.clk),L=A[0];n=L.name,n&&!L.disabled&&"image"==L.type&&(v.push({name:n,value:A.val()}),v.push({name:n+".x",value:y.clk_x},{name:n+".y",value:y.clk_y}))}return v},a.fn.formSerialize=function(c){return a.param(this.formToArray(c))},a.fn.fieldSerialize=function(c){var h=[];return this.each(function(){var n=this.name;if(n){var v=a.fieldValue(this,c);if(v&&v.constructor==Array)for(var i=0,g=v.length;g>i;i++)h.push({name:n,value:v[i]});else null!==v&&"undefined"!=typeof v&&h.push({name:this.name,value:v})}}),a.param(h)},a.fn.fieldValue=function(c){for(var h=[],i=0,v=this.length;v>i;i++){var g=this[i],y=a.fieldValue(g,c);null===y||"undefined"==typeof y||y.constructor==Array&&!y.length||(y.constructor==Array?a.merge(h,y):h.push(y))}return h},a.fieldValue=function(c,h){var n=c.name,t=c.type,v=c.tagName.toLowerCase();if(void 0===h&&(h=!0),h&&(!n||c.disabled||"reset"==t||"button"==t||("checkbox"==t||"radio"==t)&&!c.checked||("submit"==t||"image"==t)&&c.form&&c.form.clk!=c||"select"==v&&-1==c.selectedIndex))return null;if("select"==v){var g=c.selectedIndex;if(0>g)return null;for(var y=[],b=c.options,T="select-one"==t,j=T?g+1:b.length,i=T?g:0;j>i;i++){var w=b[i];if(w.selected){var S=w.value;if(S||(S=w.attributes&&w.attributes.value&&!w.attributes.value.specified?w.text:w.value),T)return S;y.push(S)}}return y}return a(c).val()},a.fn.clearForm=function(c){return this.each(function(){a("input,select,textarea",this).clearFields(c)})},a.fn.clearFields=a.fn.clearInputs=function(c){var re=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var t=this.type,h=this.tagName.toLowerCase();re.test(t)||"textarea"==h?this.value="":"checkbox"==t||"radio"==t?this.checked=!1:"select"==h?this.selectedIndex=-1:"file"==t?/MSIE/.test(navigator.userAgent)?a(this).replaceWith(a(this).clone(!0)):a(this).val(""):c&&(c===!0&&/hidden/.test(t)||"string"==typeof c&&a(this).is(c))&&(this.value="")})},a.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},a.fn.enable=function(a){return void 0===a&&(a=!0),this.each(function(){this.disabled=!a})},a.fn.selected=function(c){return void 0===c&&(c=!0),this.each(function(){var t=this.type;if("checkbox"==t||"radio"==t)this.checked=c;else if("option"==this.tagName.toLowerCase()){var h=a(this).parent("select");c&&h[0]&&"select-one"==h[0].type&&h.find("option").selected(!1),this.selected=c}})},a.fn.ajaxSubmit.debug=!1});
/*!common/components/dialog/main.js*/
;define("common/components/dialog/main",["require","exports","module","dep/jquery-colorbox/jquery.colorbox"],function(require,exports,module){require("dep/jquery-colorbox/jquery.colorbox");var c={body:"",loading:!1,okBtn:{has:!1,text:"确认",onClick:function(){$.colorbox.close()}},cancelBtn:{has:!1,text:"取消",onClick:function(){$.colorbox.close()}}};module.exports=function(a){a=$.extend(!0,{},c,a);var b;if(!a.html){var k=a.body?'<div class="dialog_body">'+a.body+"</div>":"",B=a.loading?'<div class="dialog_loading"></div>':"",g=a.okBtn&&a.okBtn.has&&a.okBtn.text?'<button class="dialog_btn dialog_ok" type="button">'+a.okBtn.text+"</button>":"",y=a.cancelBtn&&a.cancelBtn.has&&a.cancelBtn.text?'<button class="dialog_btn dialog_cancel" type="button">'+a.cancelBtn.text+"</button>":"",b=k+B+g+y;""!==b&&(a.html='<div class="dialog_container">'+b+"</div>")}a.loading&&(a.overlayClose=!1,a.closeButton=!1),$.colorbox(a),""!=b&&(a.okBtn&&a.okBtn.has&&a.okBtn.onClick&&$("#cboxContent .dialog_ok").click(a.okBtn.onClick),a.cancelBtn&&a.cancelBtn.has&&a.cancelBtn.onClick&&$("#cboxContent .dialog_cancel").click(a.cancelBtn.onClick))}});
/*!common/components/imgcutter/main.js*/
;define("common/components/imgcutter/main",["require","exports","module","dep/jquery.imgcutter/dist/jquery.imgcutter","dep/jquery-form/jquery.form","common/components/dialog/main"],function(require,exports,module){require("dep/jquery.imgcutter/dist/jquery.imgcutter"),require("dep/jquery-form/jquery.form");var c=require("common/components/dialog/main");module.exports=function(a){function g(){var g=$("#cutterDialogWrap");g.length>0&&g.remove(),$("body").append(['<div id="cutterDialogWrap" style="display:none;">','<div id="cutterDialog">','<div id="cutterContainer"></div>','<button class="cutter_btn" id="cutter_ok" type="button">确定</button>','<button class="cutter_btn" id="cutter_cancel" type="button">取消</button>',"</div>","</div>"].join("")),$dialog=$("#cutterDialog"),v();var h={previewrWidth:300,previewrHeight:300,selectorWidth:250,selectorHeight:250},j={container:"#cutterContainer",beforePreview:function(e,a){return-1===$.inArray(a.toLowerCase(),["jpg","jpeg","gif","png"])?(w("支持jpg、jpeg、gif、png格式的图片文件"),y(),!1):(c({title:"选择裁剪区域",inline:!0,href:"#cutterDialog",opacity:.4,onClosed:function(){y(),$("#cutter_ok").removeProp("disabled").text("确定")}}),!0)}};j=$.extend({},h,a,j),$dialog.css("width",j.previewrWidth),b.imgcutter(j)}function v(){$("#cutter_ok").on("click.imgcutter",function(){a.upload&&h()}),$("#cutter_cancel").on("click.imgcutter",function(){$.colorbox.close()})}function h(){$("#cutter_ok").prop("disabled","disabled").text("剪裁中..."),b=$(b.selector);var c=b.imgcutter("getCutInfo"),g=$.extend({viewPortW:c.previewrWidth,viewPortH:c.previewrHeight,selectorW:c.selectorWidth,selectorH:c.selectorHeight,selectorX:(c.previewrWidth-c.selectorWidth)/2,selectorY:(c.previewrHeight-c.selectorHeight)/2,imageW:c.currentWidth,imageH:c.currentHeight,imageX:(c.previewrWidth-c.selectorWidth)/2-c.selectorX,imageY:(c.previewrHeight-c.selectorHeight)/2-c.selectorY},a.upload.data);b.wrap('<form enctype="multipart/form-data"></form>'),b.parent().ajaxSubmit({url:a.upload.url,type:"post",data:g,dataType:"text",success:function(c){var g=JSON.parse(c);1===g.state?(a.upload.success&&a.upload.success(g),$.colorbox.close()):220===g.state||221===g.state?(y(),w("支持小于10M的jpg、jpeg、gif、png格式的图片文件")):(y(),w("上传失败，请重新上传或者联系拉勾网"))},error:function(){w("上传失败，请重新上传或联系拉勾网")},complete:function(){b.unwrap(),$("#cutter_ok").removeProp("disabled").text("确定")}})}function y(){b.wrap("<form></form>"),b.parent()[0].reset(),b.unwrap()}function w(a){c({width:500,title:"错误提示",body:'<div id="cutterError"><i></i>'+a+"</div>",okBtn:{has:!0}})}var b;a.inputFile&&(b=a.inputFile instanceof jQuery?a.inputFile:$(a.inputFile),b.length&&g())}});
/*!account-c/modules/userinfo/main.js*/
;define("account-c/modules/userinfo/main",["require","exports","module","dep/jquery-colorbox/jquery.colorbox","common/components/imgcutter/main"],function(require){function a(){var a;a=$("#userinfoEditForm .userinfo_job").size()>0&&$("#userinfoEditForm .userinfo_intro").size()>0?{portrait:$("#userinfoEditForm input[name=portrait]").val()||"",userName:$("#userinfoEditForm input[name=userName]").val().replace(/\r\n/g,"").replace(/\n/g,"")||"",sex:$("#userinfoEditForm input[name=sex]:checked").val()||"MALE",positionName:$("#userinfoEditForm input[name=positionName]").val().replace(/\r\n/g,"").replace(/\n/g,"")||"",introduce:$("#userinfoEditForm [name=introduce]").val().replace(/\r\n/g,"").replace(/\n/g,"")||""}:{portrait:$("#userinfoEditForm input[name=portrait]").val()||"",userName:$("#userinfoEditForm input[name=userName]").val().replace(/\r\n/g,"").replace(/\n/g,"")||"",sex:$("#userinfoEditForm input[name=sex]:checked").val()||"MALE"},g.ajax({url:E.url.saveUserinfo,type:"POST",data:a},{done:function(a){1==a.state?(a.content.data.url&&$("body").append('<iframe src="'+a.content.data.url+'" id="flushUserinfoAllSite" style="display: none"></iframe>'),g.alertTips("保存成功！",function(){window.location.reload()})):304==a.state?PASSPORT.popup():201==a.state?g.alertTips("你还没有添加职业信息哦！"):202==a.state?g.alertTips("职业信息最多填写50个字！"):203==a.state?g.alertTips("你还没有添加个人介绍哦！"):204==a.state?g.alertTips("个人介绍最多填写30个字！"):205==a.state?g.alertTips("你还没有填写昵称哦！"):206==a.state?g.alertTips("昵称最好不要超过15个字！"):207==a.state?g.alertTips("记得给自己上传个头像！"):302==a.state?g.alertTips("用户名包含敏感词"):(g.alertTips(a.message),console.log(a.message))},fail:function(){g.alertTips("保存用户信息失败"),console.log("saveUserinfo error")}})}function c(a){var c=/^(https?):\/\/((?:[\u4E00-\u9FA5a-z0-9.-]|%[0-9A-F]{2}){2,})(?::(\d+))?((?:\/(?:[a-z0-9-._~!$&'()*+,;=:@]|%[0-9A-F]{2})*)*)(?:\?((?:[a-z0-9-._~!$&'()*+,;=:\/?@]|%[0-9A-F]{2})*))?(?:#((?:[a-z0-9-._~!$&'()*+,;=:\/?@]|%[0-9A-F]{2})*))?$/i,v=top.location,$={protocol:v.protocol.substring(0,v.protocol.length-1),hostname:v.hostname,port:v.port||"80"},E=c.exec(a);if(E&&E.length){var g={protocol:E[1],hostname:E[2],port:E[3]||"80"};return $.protocol!=g.protocol||$.hostname!=g.hostname||$.port!=g.port?!0:!1}return!1}require("dep/jquery-colorbox/jquery.colorbox");var v=require("common/components/imgcutter/main"),E={url:{uploadAndcutPic:GLOBAL_DOMAIN.actx+"/account/cuser/uploadAndcutPic.json",validateUserName:GLOBAL_DOMAIN.zctx+"/user/validateUserName.json",saveUserinfo:GLOBAL_DOMAIN.actx+"/account/cuser/saveInfo.json"}};$(".edit_link").click(function(){$(".hadInfo").hide(),$("#userinfoEditForm").show()});var g={ajax:function(a,v){if(a.url){var E;E=c(a.url)?{url:a.url,dataType:"jsonp",jsonp:"jsoncallback",data:a.data||{}}:{url:a.url,type:a.type||"GET",dataType:"json",data:a.data||{}},$.ajax(E).done(function(a){v&&v.done&&v.done(a)}).fail(function(){v&&v.fail&&v.fail()}).always(function(){v&&v.always&&v.always()})}},alertTips:function(a,c){$.colorbox({title:"提示",html:'<div class="tipsContent"><p>'+a+"</p></div>",overlayClose:!0,onClosed:function(){c&&c()}})}};!function(){function c(){var a=$("#userinfoEditUserName"),c=a.val();return c?c.length>15&&!j?!1:(b(a),!0):(_("昵称不能为空",a),!1)}function g(a){return y=!0,a&&a(),!0}function h(){if($("#userinfoEditForm .userinfo_job").size()<1)return!0;var a=$("#userinfoEditPositionName"),c=a.val();return c?c.length>70&&!j?!1:(b(a),!0):(_("职业不能为空",a),!1)}function F(){if($("#userinfoEditForm .userinfo_intro").size()<1)return!0;var a=$("#userinfoEditIntroduce"),c=a.val();return c?c.length>30&&!j?!1:(b(a),!0):(_("个人介绍不能为空",a),!1)}function _(a,c){var v=$(c);v.siblings("em.error").size()<1&&v.after('<em class="error"></em>'),v.siblings("em.error").html(a).show()}function b(a){var c=$(a);c.siblings("em.error").size()>0&&c.siblings("em.error").hide()}function A(){var a=c(),v=h(),E=F();return a&&v&&E&&y?($("#userinfoEdit .userinfo_save").removeClass("btn_disable"),!0):($("#userinfoEdit .userinfo_save").addClass("btn_disable"),!1)}var N=$("#userinfoEditForm .avatar .avatar_img").prop("src"),T=$("#userinfoEditForm input[name=portrait]").val()||"";v({inputFile:"#avatarUpload",upload:{url:E.url.uploadAndcutPic,success:function(a){var c=a.content.data.cutPicUrl;$("#userinfoEditForm .avatar .avatar_img").prop("src",GLOBAL_DOMAIN.lgsctx+"/"+c),$("#userinfoEditForm input[name=portrait]").val(c)}}}),$("#userinfoEditForm .avatar").click(function(){$("#avatarUpload").click()});var j=!1;$("#userinfoEditUserName, #userinfoEditPositionName, #userinfoEditIntroduce").on("input",function(){A()}),$("#userinfoEditUserName").on("change",function(){$(this).val($.trim($(this).val())),g(A)}),$("#userinfoEditPositionName, #userinfoEditIntroduce").on("change",function(){$(this).val($.trim($(this).val())),A()});var y=!0;$("#userinfoEdit .input_box").on("click","em.error",function(){$(this).siblings("input, textarea").focus()}),$("#userinfoEdit").on("click",".userinfo_save",function(){A()&&g(function(){A()&&a()})}),$("#userinfoEdit").on("click",".userinfo_cancel",function(){$("#userCardNormal").show(),$("#userinfoEdit").hide(),$("#userinfoEditForm").get(0).reset(),$("#userinfoEditForm .avatar .avatar_img").prop("src",N),$("#userinfoEditForm input[name=portrait]").val(T)}),A()&&g(A)}()});